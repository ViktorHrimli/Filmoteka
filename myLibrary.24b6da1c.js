!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var i={title:document.querySelector("#titel-list"),titleLib:document.querySelector("#titel-list-lib"),backDrop:document.querySelector(".backdrop"),btnAddWatched:document.querySelector('button[data-action="add-to-watched-lib"]'),btnQueve:document.querySelector('button[data-action="queve-lib"]'),poster:document.querySelector("#poster")};function o(e){return"watched"===e?(i.btnQueve.classList.remove("active"),void i.btnAddWatched.classList.add("active")):"queve"===e?(i.btnAddWatched.classList.remove("active"),void i.btnQueve.classList.add("active")):void 0}function c(){var e=!0,t=!1,n=void 0;try{for(var a,o=i.titleLib.children[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){a.value.addEventListener("click",r)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}function r(e){var t,n;i.backDrop.classList.remove("is-hidden"),i.backDrop.addEventListener("click",d),i.backDrop.classList.contains("is-hidden")||window.addEventListener("keydown",s,{once:!0}),i.backDrop.classList.contains("is-hidden")&&i.backDrop.removeEventListener("click",d),t=parseInt(e.target.name),n=[],(0,p.getIdMovies)(t).then((function(e){var t=e.data;t.genres.filter((function(e){return n.push(e.name),n})),i.backDrop.innerHTML="",i.backDrop.insertAdjacentHTML("beforeend",(0,L.renderModal_Lib)(t,n)),h(y(t)),g(t)})).catch(console.error)}function d(e){"backdrop"===e.target.className&&i.backDrop.classList.add("is-hidden")}function s(e){if("Escape"===e.code)return i.backDrop.classList.add("is-hidden")}function l(e){i.titleLib.innerHTML="",JSON.parse(localStorage.getItem(e)).map((function(e){var t,n,a,o,r,d,s,l,u;i.titleLib.insertAdjacentHTML("beforeend",(a=(n=e).filmsName,o=n.filmsImg,r=n.filmRelise,d=n.filmGanre,s=n.filmRait,l=n.id,t=[],d.map((function(e){return t.push(e.name)})),t.length>2&&t.splice(2,3),u=t.join(" "),'\n  <li class="list--title">\n          <img name="'.concat(l,'" src="https://image.tmdb.org/t/p/w500').concat(o,'" alt="').concat(a,'" />\n        <div class="conteiner--image__title">\n          <p class="image--title">\n            ').concat(a,' <br />\n            <div class="list--ganre_date--conteiner">\n            <span class="image--text">\n              ').concat(u," | ").concat(r,'\n            </span>\n            <span class="rait">').concat(s.toFixed(2),"</span>\n            </div>\n          </p>\n        </div>\n      </li>\n    "))),c()}))}function u(e){return f("watch",e)}function v(e){return f("queve",e)}function m(e,t,n){e.addEventListener("click",(function(e){console.log(e.target),u(n)})),t.addEventListener("click",(function(e){console.log(e.target),v(n)}))}function f(e,t){var n=[];console.log(e),JSON.parse(localStorage.getItem(e)).filter((function(e){if(e.id!==t.id)return n.push(e)})),localStorage.removeItem(e),localStorage.setItem(e,JSON.stringify(n)),i.backDrop.classList.add("is-hidden"),l(e)}function g(e){var t,n,a,i,o,c,r={btnWt:document.querySelector('button[data-action="add-to-watch"]'),btnQueve:document.querySelector('button[data-action="queve"]'),btnRemoveWatch:document.querySelector('button[data-action="removeWatch"]'),btnRemoveQueve:document.querySelector('button[data-action="removeQueve"]')};n=(t=r).btnWt,a=t.btnQueve,i=t.btnRemoveWatch,o=t.btnRemoveQueve,"watch"===(c=JSON.parse(localStorage.getItem("find-tru-page")))?(n.classList.add("opaciti"),i.classList.remove("opaciti"),i.classList.add("remove")):"queve"===c&&(a.classList.add("opaciti"),o.classList.remove("opaciti"),o.classList.add("remove")),m(r.btnRemoveWatch,r.btnRemoveQueve,e)}i.btnAddWatched.addEventListener("click",(function(e){localStorage.setItem("find-tru-page",JSON.stringify("watch")),o(e.target.name),l("watch")})),i.btnQueve.addEventListener("click",(function(e){localStorage.setItem("find-tru-page",JSON.stringify("queve")),o(e.target.name),l("queve")}));var p=a("gbT2k");function b(e,t,n,a){e.addEventListener("click",(function(e){var i=[],o=[];o=JSON.parse(localStorage.getItem(a)),i=JSON.parse(localStorage.getItem(n))||[],o.map((function(e){return e.id})).includes(t.id)&&!i.map((function(e){return e.id})).includes(t.id)&&i.push(t),localStorage.removeItem(n),localStorage.setItem(n,JSON.stringify(i))}))}function S(e,t,n,a){e.addEventListener("click",(function(e){var i=[],o=[];i=JSON.parse(localStorage.getItem(n)),!(o=JSON.parse(localStorage.getItem(a))||[]).map((function(e){return e.id})).includes(t.id)&&i.map((function(e){return e.id})).includes(t.id)&&o.push(t),localStorage.removeItem(a),localStorage.setItem(a,JSON.stringify(o))}))}function h(e){var t={btnWt:document.querySelector('button[data-action="add-to-watch"]'),btnQueve:document.querySelector('button[data-action="queve"]'),btnRemoveCard:document.querySelector('button[data-action="remove"]')},n="watch",a="queve";b(t.btnWt,e,n,a),S(t.btnQueve,e,n,a)}a("fpFLL");var L=a("gQM3s");p=a("gbT2k");function y(e){var t=new Date(e.release_date).getFullYear();return{filmsName:e.original_title,filmsImg:e.poster_path,filmRelise:t,filmGanre:e.genres,filmRait:e.vote_average,id:e.id}}localStorage.setItem("find-tru-page",JSON.stringify("watch")),JSON.parse(localStorage.getItem("watch")).length<1?i.poster.classList.remove("dis"):(i.poster.classList.add("dis"),i.btnAddWatched.classList.add("active"),l("watch"))}();
//# sourceMappingURL=myLibrary.24b6da1c.js.map
