var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in a){var i=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,i.call(n.exports,n,n.exports),n.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){a[e]=t},e.parcelRequired7c6=i);const n={title:document.querySelector("#titel-list"),titleLib:document.querySelector("#titel-list-lib"),backDrop:document.querySelector(".backdrop"),btnAddWatched:document.querySelector('button[data-action="add-to-watched-lib"]'),btnQueve:document.querySelector('button[data-action="queve-lib"]')};function c(e){for(let e of n.titleLib.children)e.addEventListener("click",o)}function o(e){n.backDrop.classList.remove("is-hidden"),n.backDrop.addEventListener("click",r),n.backDrop.classList.contains("is-hidden")||window.addEventListener("keydown",d,{once:!0}),n.backDrop.classList.contains("is-hidden")&&n.backDrop.removeEventListener("click",r),g(parseInt(e.target.name))}function r(e){"backdrop"===e.target.className&&n.backDrop.classList.add("is-hidden")}function d(e){if("Escape"===e.code)return n.backDrop.classList.add("is-hidden")}function s(e){return"watched"===e?(n.btnQueve.classList.remove("active"),void n.btnAddWatched.classList.add("active")):"queve"===e?(n.btnAddWatched.classList.remove("active"),void n.btnQueve.classList.add("active")):void 0}function l(e){n.titleLib.innerHTML="";const t=localStorage.getItem(e);JSON.parse(t).map((e=>{n.titleLib.insertAdjacentHTML("beforeend",function({filmsName:e,filmsImg:t,filmRelise:a,filmGanre:i,filmRait:n,id:c}){return`\n  <li class="list--title">\n          <img name="${c}" src="https://image.tmdb.org/t/p/w500${t}" alt="${e}" />\n        <div class="conteiner--image__title">\n          <p class="image--title">\n            ${e} <br />\n            <div class="list--ganre_date--conteiner">\n            <span class="image--text">\n              ${function(e){let t=[];return e.map((e=>t.push(e.name))),t.length>2&&t.splice(2,3),t.join(" ")}(i)} | ${a}\n            </span>\n            <span class="rait">${n.toFixed(2)}</span>\n            </div>\n          </p>\n        </div>\n      </li>\n    `}(e)),c()}))}function u(e,t,a){e.addEventListener("click",(()=>{let e=[];JSON.parse(localStorage.getItem(a[0])).filter((a=>{if(a.id!==t.id)return e.push(a)})),localStorage.removeItem(a[0]),localStorage.setItem(a[0],JSON.stringify(e)),n.backDrop.classList.add("is-hidden"),l(a[0])}))}function b(e,t,a){e.addEventListener("click",(()=>{let e=[];JSON.parse(localStorage.getItem(a[1])).filter((a=>{if(a.id!==t.id)return e.push(a)})),localStorage.removeItem(a[1]),localStorage.setItem(a[1],JSON.stringify(e)),n.backDrop.classList.add("is-hidden"),l(a[1])}))}function m(e,t,{btnWt:a,btnQueve:i,btnRemoveCard:n}){return JSON.parse(localStorage.getItem(t[0])).map((e=>e.id)).includes(e.id)?(i.classList.add("active"),a.classList.add("opaciti"),n.classList.remove("opaciti"),void n.classList.add("remove")):JSON.parse(localStorage.getItem(t[1])).map((e=>e.id)).includes(e.id)?(i.classList.add("opaciti"),a.classList.add("active"),n.classList.remove("opaciti"),void n.classList.add("remove")):void 0}function v(e){const t={btnWt:document.querySelector('button[data-action="add-to-watch"]'),btnQueve:document.querySelector('button[data-action="queve"]'),btnRemoveCard:document.querySelector('button[data-action="remove"]')};m(e,Object.keys(localStorage),t),b(t.btnRemoveCard,e,Object.keys(localStorage)),u(t.btnRemoveCard,e,Object.keys(localStorage))}n.btnAddWatched.addEventListener("click",(function(e){s(e.target.name),l(Object.keys(localStorage)[1])})),n.btnQueve.addEventListener("click",(function(e){s(e.target.name),l(Object.keys(localStorage)[0])}));var p=i("cjwWu");i("3ZI3M");var f=i("bBupM");p=i("cjwWu");function g(e){let t=[];(0,p.getIdMovies)(e).then((({data:e})=>{e.genres.filter((e=>(t.push(e.name),t))),n.backDrop.innerHTML="",n.backDrop.insertAdjacentHTML("beforeend",(0,f.renderModal_Lib)(e,t)),v(e)})).catch(console.error)}
//# sourceMappingURL=myLibrary.1dc72f28.js.map
